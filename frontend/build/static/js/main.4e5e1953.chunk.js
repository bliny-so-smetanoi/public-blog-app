(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{43:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(16),i=n.n(c),o=(n(43),n(11)),s=n(6);function l(){}var u=Object(r.createContext)({token:null,userId:null,login:l,logout:l,isAuth:!1}),A=n(3),d="userData",p=function(){var e=Object(r.useState)(null),t=Object(A.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!1),i=Object(A.a)(c,2),o=i[0],s=i[1],l=Object(r.useState)(),u=Object(A.a)(l,2),p=u[0],j=u[1],b=Object(r.useCallback)((function(e,t){a(e),j(t),localStorage.setItem(d,JSON.stringify({userId:t,token:e}))}),[]),h=Object(r.useCallback)((function(){j(null),a(null),localStorage.removeItem(d)}),[]);return Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem(d));e&&e.token&&b(e.token,e.userId),s(!0)}),[b]),{login:b,logout:h,token:n,userId:p,ready:o}},j=n(2),b=n.n(j),h=n(5),x=function(){var e=Object(r.useState)(!1),t=Object(A.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(null),i=Object(A.a)(c,2),o=i[0],s=i[1],l=Object(r.useState)(null),u=Object(A.a)(l,2),d=u[0],p=u[1];return{loading:n,request:Object(r.useCallback)(function(){var e=Object(h.a)(b.a.mark((function e(t){var n,r,c,i,o,l=arguments;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:"GET",r=l.length>2&&void 0!==l[2]?l[2]:null,c=l.length>3&&void 0!==l[3]?l[3]:{},a(!0),e.prev=4,r&&('multipart/form-data; charset=utf-8; boundary="--WebKitBoundary"'!==c["Content-Type"]&&(r=JSON.stringify(r)),void 0===c["Content-Type"]&&(c["Content-Type"]="application/json")),e.next=8,fetch(t,{method:n,body:r,headers:c});case 8:return i=e.sent,e.next=11,i.json();case 11:if(o=e.sent,i.ok){e.next=15;break}throw p(o.errors),new Error(o.message||"Something went wrong...");case 15:return a(!1),e.abrupt("return",o);case 19:throw e.prev=19,e.t0=e.catch(4),a(!1),s(e.t0.message),e.t0;case 24:case"end":return e.stop()}}),e,null,[[4,19]])})));return function(t){return e.apply(this,arguments)}}(),[]),error:o,clearError:Object(r.useCallback)((function(){return s(null)}),[]),clearMessages:Object(r.useCallback)((function(){return p(null)}),[]),messages:d}},m=n(12),g=n(7),O=n(13),f=n.n(O),y=n(63),v=(n(25),n(0));function k(e){var t=Object(y.a)(),n=(t.t,t.i18n),r=e.reply,a=Object(s.f)(),c=new Date(Date.now()),i=c.getFullYear().toString(),o="".concat(c.getDate()).concat(c.getMonth()+1).concat(c.getFullYear()),l=new Date(r.date_time),u=l.getFullYear().toString(),A=o==="".concat(l.getDate()).concat(l.getMonth()+1).concat(l.getFullYear()),d=i===u;return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"homepage-main-article-comment reply",children:[Object(v.jsxs)("div",{onClick:function(){var e=JSON.parse(localStorage.getItem("userData"));null===e||e.userId!==r.sender._id?a("/user/"+r.sender._id):a("/profile")},style:{display:"flex",flexDirection:"row",cursor:"pointer"},children:[Object(v.jsx)("span",{children:Object(v.jsx)("img",{width:40,height:40,style:{borderRadius:"50%",marginRight:"15px"},src:"https://publicblogapp.herokuapp.com/api/files/download/"+r.sender.profile.image,alt:""})}),Object(v.jsxs)("p",{style:{cursor:"pointer"},children:[r.sender.first_name," ",r.sender.last_name]})]}),Object(v.jsxs)("p",{style:{cursor:"pointer"},onClick:function(){var e=JSON.parse(localStorage.getItem("userData"));null===e||e.userId!==r.receiver._id?a("/user/"+r.receiver._id):a("/profile")},children:[Object(v.jsxs)("span",{style:{color:"gray"},children:[r.receiver.first_name," ",r.receiver.last_name]}),", ",r.body_text]}),Object(v.jsxs)("p",{style:{fontSize:"14px",color:"grey"},children:[A&&Object(v.jsx)(f.a,{locale:n.language,fromNow:!0,children:r.date_time}),!A&&d&&Object(v.jsx)(f.a,{locale:n.language,format:"D MMM HH:MM",children:r.date_time}),!d&&!A&&Object(v.jsx)(f.a,{locale:n.language,format:"D MMM YYYY",children:r.date_time})]})]},r._id)})}function w(e){var t=e.replies.map((function(e){return Object(v.jsx)(k,{reply:e})}));return Object(v.jsx)(v.Fragment,{children:t})}var S=n(8),I=n(17);function C(e){var t=Object(s.f)(),n=Object(y.a)(),a=n.t,c=n.i18n,i=Object(r.useState)(e.comment),o=Object(A.a)(i,2),l=o[0],d=o[1],j=x(),m=j.request,g=j.loading,O=p().userId,k=Object(r.useContext)(u).isAuth,C=Object(r.useState)(!1),E=Object(A.a)(C,2),N=E[0],D=E[1],B=Object(r.useState)({body_text:""}),T=Object(A.a)(B,2),R=T[0],M=T[1],z=Object(r.useState)(!1),L=Object(A.a)(z,2),F=L[0],G=L[1];function Y(){return J.apply(this,arguments)}function J(){return(J=Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m("/api/articles/comments/comment/"+l._id);case 3:t=e.sent,d(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function _(){return(_=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,""!==R.body_text.trim()){e.next=4;break}return S.NotificationManager.error(a("Reply cannot be empty!")),e.abrupt("return");case 4:return e.next=6,m("/api/articles/comments/reply","POST",{commentId:l._id,user:O,receiver:l.user_id,body_text:R.body_text});case 6:return e.next=8,Y();case 8:M({body_text:""}),S.NotificationManager.success(a("Replied")),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}var U=new Date(Date.now()),Q=U.getFullYear().toString(),W="".concat(U.getDate()).concat(U.getMonth()+1).concat(U.getFullYear()),H=new Date(l.date_time),P=H.getFullYear().toString(),K=W==="".concat(H.getDate()).concat(H.getMonth()+1).concat(H.getFullYear()),q=Q===P;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{onMouseEnter:function(){return G(!0)},onMouseLeave:function(){return G(!1)},className:"homepage-main-article-comment",children:[Object(v.jsxs)("div",{onClick:function(){var e=JSON.parse(localStorage.getItem("userData"));null===e||e.userId!==l.user._id?t("/user/"+l.user._id):t("/profile")},style:{display:"flex",flexDirection:"row",cursor:"pointer"},children:[Object(v.jsx)("span",{children:Object(v.jsx)("img",{width:60,height:60,style:{borderRadius:"50%",marginRight:"15px"},src:"https://publicblogapp.herokuapp.com/api/files/download/"+l.user.profile.image,alt:""})}),Object(v.jsx)("span",{children:Object(v.jsxs)("p",{style:{cursor:"pointer"},children:[l.user.first_name," ",l.user.last_name]})})]}),Object(v.jsx)("p",{children:l.body_text}),Object(v.jsxs)("p",{style:{fontSize:"14px",color:"grey"},children:[K&&Object(v.jsx)(f.a,{locale:c.language,fromNow:!0,children:l.date_time}),!K&&q&&Object(v.jsx)(f.a,{locale:c.language,format:"D MMM HH:MM",children:l.date_time}),!q&&!K&&Object(v.jsx)(f.a,{locale:c.language,format:"D MMM YYYY",children:l.date_time}),(F&&k||I.isMobile&&k)&&Object(v.jsxs)("span",{children:[" ",Object(v.jsx)("b",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){return D(!0)},children:a("reply")})]})]})]},l._id),0!==Object.keys(l.replies[0]).length&&Object(v.jsx)(w,{replies:l.replies}),N&&Object(v.jsxs)("div",{className:"send-comment reply",children:[Object(v.jsx)("textarea",{value:R.body_text,onChange:function(e){M({body_text:e.target.value}),console.log(R.body_text)},name:"body_text",style:{resize:"none",borderTop:"none",borderRight:"none",borderLeft:"none",borderBottom:"2px solid lightgray",fontSize:"15px"},disabled:g,placeholder:"".concat(a("Reply to")," ").concat(l.name),rows:4,cols:110}),Object(v.jsx)("button",{style:{color:"#501B1D",fontSize:"16px",backgroundColor:"white",border:"none",cursor:"pointer",borderTopRightRadius:"15px",borderBottomRightRadius:"15px"},disabled:g,onClick:function(){return _.apply(this,arguments)},children:Object(v.jsx)("i",{className:"arrow right"})})]})]})}function E(e){var t=e.comments.map((function(e){return Object(v.jsx)(C,{comment:e})}));return Object(v.jsx)(v.Fragment,{children:t})}function N(e){var t=Object(s.f)(),n=Object(y.a)(),a=n.t,c=n.i18n,i=Object(r.useState)(e.article),o=Object(A.a)(i,2),l=o[0],d=o[1],p=Object(r.useContext)(u),j=p.userId,O=p.isAuth,k=x(),w=k.request,C=k.loading,N=Object(r.useState)(!1),D=Object(A.a)(N,2),B=D[0],T=D[1],R=Object(r.useState)(!0),M=Object(A.a)(R,2),z=M[0],L=M[1],F=Object(r.useState)(!1),G=Object(A.a)(F,2),Y=G[0],J=G[1],_=Object(r.useState)(!1),U=Object(A.a)(_,2),Q=U[0],W=U[1],H=Object(r.useState)(!1),P=Object(A.a)(H,2),K=P[0],q=P[1],Z=Object(r.useState)([]),X=Object(A.a)(Z,2),V=X[0],$=X[1],ee=Object(r.useState)(!1),te=Object(A.a)(ee,2),ne=te[0],re=te[1],ae=Object(r.useState)({body_text:""}),ce=Object(A.a)(ae,2),ie=ce[0],oe=ce[1],se=Object(r.useState)({title:l.title,body_text:l.body_text}),le=Object(A.a)(se,2),ue=le[0],Ae=le[1],de=new Date(Date.now()),pe=de.getFullYear().toString(),je="".concat(de.getDate()).concat(de.getMonth()+1).concat(de.getFullYear()),be=new Date(l.date_time),he=be.getFullYear().toString(),xe=je==="".concat(be.getDate()).concat(be.getMonth()+1).concat(be.getFullYear()),me=pe===he;function ge(){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,q(!1),e.next=4,w("/api/articles/comments/".concat(l._id));case 4:t=e.sent,$(t),W(!0),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function fe(){return(fe=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,""!==ie.body_text.trim()){e.next=4;break}return S.NotificationManager.error(a("Comment cannot be empty!")),e.abrupt("return");case 4:return e.next=6,w("/api/articles/comments/create","POST",Object(g.a)(Object(g.a)({},ie),{},{user_id:j,article_id:l._id}));case 6:return e.sent,oe({body_text:""}),S.NotificationManager.success(a("Commented!")),e.next=11,ge();case 11:e.next=15;break;case 13:e.prev=13,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function ye(){return ve.apply(this,arguments)}function ve(){return(ve=Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("/api/articles/".concat(l._id),"GET",null,{Authorization:"Bearer "+j});case 2:t=e.sent,d(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e){Ae(Object(g.a)(Object(g.a)({},ue),{},Object(m.a)({},e.target.name,e.target.value)))}function we(){return(we=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,""!==ue.title.trim()&&""!==ue.body_text.trim()){e.next=4;break}return S.NotificationManager.error(a("Cannot be empty!")),e.abrupt("return");case 4:return e.next=6,w("/api/articles/edit","PUT",Object(g.a)(Object(g.a)({},ue),{},{articleId:l._id}));case 6:return e.next=8,ye();case 8:T(!1),S.NotificationManager.info(a("Edited")),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function Se(){return(Se=Object(h.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/articles/delete/"+l._id,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(j)}}).then((function(e){return e.json()}));case 3:t.sent&&(S.NotificationManager.error(a("Post deleted")),e.onDelete()),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}var Ie="https://publicblogapp.herokuapp.com/api/files/download/";function Ce(){return(Ce=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l.isLiked){e.next=10;break}return e.next=3,w("/api/articles/like","DELETE",{id:l._id,userId:j});case 3:if(!e.sent){e.next=8;break}return S.NotificationManager.error(a("Disliked")),e.next=8,ye();case 8:e.next=17;break;case 10:return e.next=12,w("/api/articles/like","POST",{id:l._id,userId:j});case 12:if(!e.sent){e.next=17;break}return S.NotificationManager.success(a("Liked!")),e.next=17,ye();case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{onMouseEnter:function(){return q(!0)},onMouseLeave:function(){re(!1),q(!1)},className:"homepage-main-article-card",children:[Object(v.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},align:"left",children:[Object(v.jsxs)("span",{style:{cursor:"pointer",display:"flex",flexDirection:"row"},onClick:function(){var e=JSON.parse(localStorage.getItem("userData"));null===e||e.userId!==l.user[0]._id?t("/user/"+l.user[0]._id):t("/profile")},children:[Object(v.jsx)("div",{children:Object(v.jsx)("img",{width:60,height:60,style:{borderRadius:"50%",marginRight:"15px"},src:Ie+l.user[0].profile.image,alt:""})}),Object(v.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",marginRight:"10px"},children:[l.user[0].first_name," ",l.user[0].last_name]}),l.isAuthor&&Object(v.jsxs)("b",{style:{color:"#501B1D",display:"flex",alignItems:"center",justifyContent:"center"},children:[" ",a("you")]})]}),B&&Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{onClick:function(){return we.apply(this,arguments)},style:{cursor:"pointer",fontSize:"30px",marginRight:"20px"},children:"\u2713"}),Object(v.jsx)("span",{onClick:function(){return T(!1)},style:{cursor:"pointer",fontSize:"30px"},children:"\u2715"})]}),(K&&l.isAuthor&&!B||I.isMobile&&l.isAuthor&&!B)&&Object(v.jsxs)("div",{onClick:function(){return re(!ne)},style:{position:"relative",cursor:"pointer"},children:[Object(v.jsx)("span",{children:Object(v.jsx)("div",{style:{fontSize:"25px",height:"5px"},children:"..."})}),ne&&Object(v.jsxs)("span",{style:{position:"absolute",zIndex:"1"},children:[Object(v.jsx)("span",{children:Object(v.jsx)("button",{style:{border:"1px solid lightgray",backgroundColor:"#501B1D",color:"white",borderRadius:"10px",padding:"8px"},onClick:function(){return Se.apply(this,arguments)},children:a("Delete")})}),Object(v.jsx)("span",{children:Object(v.jsx)("button",{onClick:function(){return T(!0)},style:{border:"1px solid lightgray",backgroundColor:"#501B1D",color:"white",borderRadius:"10px",padding:"8px"},children:a("Edit")})})]})]}),l.isAuthor&&K||I.isMobile&&l.isAuthor]}),Object(v.jsxs)("div",{style:{fontSize:"16px",marginBottom:"10px"},align:"left",children:[xe&&Object(v.jsx)(f.a,{locale:c.language,fromNow:!0,children:l.date_time}),!xe&&me&&Object(v.jsx)(f.a,{locale:c.language,format:"D MMM HH:MM",children:l.date_time}),!me&&!xe&&Object(v.jsx)(f.a,{locale:c.language,format:"D MMM YYYY",children:l.date_time}),l.edited&&Object(v.jsxs)("span",{children:[" ",Object(v.jsx)("b",{style:{fontSize:"15px"},children:a("edited")})]})]}),!B&&Object(v.jsx)("b",{style:{fontSize:"20px"},children:l.title}),Object(v.jsxs)("p",{style:{marginBottom:"30px"},children:[B&&Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(v.jsx)("input",{onChange:ke,value:ue.title,name:"title",type:"text",style:{padding:"5px",borderTop:"1px solid lightgray",borderRight:"1px solid lightgray",borderLeft:"1px solid lightgray",borderBottom:"none",outlineStyle:"none"},placeholder:"Title"}),Object(v.jsx)("textarea",{onChange:ke,value:ue.body_text,name:"body_text",style:{resize:"none",borderTop:"none",borderRight:"1px solid lightgray",borderLeft:"1px solid lightgray",borderBottom:"1px solid lightgray"},cols:40,rows:10,placeholder:"Text"})]}),(l.body_text.length<=1700||Y)&&!B&&l.body_text,l.body_text.length>1700&&!Y&&!B&&l.body_text.slice(0,1700)+"... ",l.body_text.length>1700&&K&&!B&&Object(v.jsx)("i",{style:{textDecoration:"underline",cursor:"pointer"},onClick:function(){return J(!Y)},children:a(Y?"show less":"show more")})]}),l.image&&Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"20px"},align:"center",children:[z&&Object(v.jsx)("p",{children:"loading..."}),Object(v.jsx)("img",{className:"article-image",onLoad:function(){return L(!1)},width:"800px",src:"".concat(Ie).concat(l.image),loading:"lazy"})]}),Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(v.jsxs)("div",{style:{minHeight:"30px",display:"flex",justifyContent:"space-between"},children:[Object(v.jsx)("span",{children:Object(v.jsxs)("button",{style:{borderRadius:"20px",border:"1px solid gray",backgroundColor:"#FFF3F0",cursor:"pointer",paddingRight:"13px",paddingLeft:"13px",display:"flex",flexDirection:"row",justifyContent:"space-between",width:"70px"},disabled:!O||C,onClick:function(){return Ce.apply(this,arguments)},children:[!l.isLiked&&Object(v.jsx)("span",{children:Object(v.jsx)("svg",{fill:"gray",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:Object(v.jsx)("path",{d:"M6.28 3c3.236.001 4.973 3.491 5.72 5.031.75-1.547 2.469-5.021 5.726-5.021 2.058 0 4.274 1.309 4.274 4.182 0 3.442-4.744 7.851-10 13-5.258-5.151-10-9.559-10-13 0-2.676 1.965-4.193 4.28-4.192zm.001-2c-3.183 0-6.281 2.187-6.281 6.192 0 4.661 5.57 9.427 12 15.808 6.43-6.381 12-11.147 12-15.808 0-4.011-3.097-6.182-6.274-6.182-2.204 0-4.446 1.042-5.726 3.238-1.285-2.206-3.522-3.248-5.719-3.248z"})})}),l.isLiked&&Object(v.jsx)("span",{children:Object(v.jsx)("svg",{fill:"#922025",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:Object(v.jsx)("path",{d:"M12 4.248c-3.148-5.402-12-3.825-12 2.944 0 4.661 5.571 9.427 12 15.808 6.43-6.381 12-11.147 12-15.808 0-6.792-8.875-8.306-12-2.944z"})})}),Object(v.jsx)("span",{style:{fontSize:"18px"},children:l.likesCount})]})}),(!Q&&K||I.isMobile&&!Q)&&Object(v.jsxs)("span",{className:"button-comment",onClick:ge,children:[!C&&a("show comments "),C&&"loading...","\u25be"]})]}),Q&&0===V.length&&Object(v.jsx)("div",{align:"center",style:{fontSize:"15px"},children:a("No comments added yet...")}),Q&&Object(v.jsx)("div",{children:Object(v.jsx)("div",{style:{paddingLeft:"25px"},children:Object(v.jsx)(E,{comments:V})})}),Object(v.jsx)("br",{}),Object(v.jsxs)("div",{className:"send-comment",children:[Q&&O&&Object(v.jsx)("textarea",{value:ie.body_text,disabled:!O,onChange:function(e){oe(Object(g.a)(Object(g.a)({},ie),{},Object(m.a)({},e.target.name,e.target.value)))},name:"body_text",style:{resize:"none",borderTop:"none",borderRight:"none",borderLeft:"none",borderBottom:"2px solid lightgray"},placeholder:a("Write your comment here..."),rows:4,cols:110}),Q&&O&&Object(v.jsx)("button",{style:{color:"#501B1D",fontSize:"16px",backgroundColor:"white",border:"none",cursor:"pointer",borderTopRightRadius:"15px",borderBottomRightRadius:"15px"},disabled:!O,onClick:function(){return fe.apply(this,arguments)},children:Object(v.jsx)("i",{className:"arrow right"})})]})]})]})})}function D(e){var t=e.articles.map((function(t){return Object(v.jsx)(N,{onDelete:e.onDelete,article:t},t._id)}));return Object(v.jsx)(v.Fragment,{children:t})}function B(e){var t=Object(r.useContext)(u),n=t.userId,a=t.isAuth,c=x().request,i=Object(r.useState)(!1),o=Object(A.a)(i,2),s=o[0],l=o[1],d=Object(y.a)(),p=d.t,j=(d.i18n,Object(r.useState)({body_text:"",title:""})),O=Object(A.a)(j,2),f=O[0],k=O[1],w=Object(r.useState)(null),I=Object(A.a)(w,2),C=I[0],E=I[1];function N(){return(N=Object(h.a)(b.a.mark((function t(){var r,a,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,""!==f.body_text.trim()&&""!==f.title.trim()){t.next=4;break}return S.NotificationManager.error(p("Title and text cannot be empty!")),t.abrupt("return");case 4:return l(!0),(r=new FormData).append("file",C),t.next=9,fetch("/api/files/upload",{method:"POST",body:r});case 9:return a=t.sent,t.next=12,a.json();case 12:return i=t.sent,t.next=15,c("/api/articles/create","POST",Object(g.a)(Object(g.a)({},f),{},{author:n,image:i.filename}));case 15:t.sent,e.onCreate(),k({body_text:"",title:""}),B(),S.NotificationManager.success(p("Posted!")),l(!1),t.next=25;break;case 23:t.prev=23,t.t0=t.catch(0);case 25:case"end":return t.stop()}}),t,null,[[0,23]])})))).apply(this,arguments)}function D(e){k(Object(g.a)(Object(g.a)({},f),{},Object(m.a)({},e.target.name,e.target.value)))}function B(){E(null),document.getElementById("input-file").value="",document.getElementById("image-input").src=""}return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"homepage-main-create",style:{display:"flex",flexDirection:"column"},children:[Object(v.jsxs)("p",{style:{display:"flex",color:"#501B1D",justifyContent:"space-between",fontSize:"20px"},children:[a&&p("Create new post:"),!a&&"In order to create post you need to log in",Object(v.jsx)("button",{className:"create-button",onClick:function(){return N.apply(this,arguments)},disabled:s,children:p("Post")})]}),Object(v.jsx)("input",{style:{padding:"5px",borderTop:"1px solid lightgray",borderRight:"1px solid lightgray",borderLeft:"1px solid lightgray",borderBottom:"none",outlineStyle:"none"},disabled:s,onChange:D,name:"title",type:"text",placeholder:p("Title"),value:f.title}),Object(v.jsx)("textarea",{disabled:s,onChange:D,name:"body_text",value:f.body_text,placeholder:p("Write your text here"),style:{resize:"none",borderTop:"none",borderRight:"1px solid lightgray",borderLeft:"1px solid lightgray",borderBottom:"1px solid lightgray"},cols:40,rows:10}),Object(v.jsx)("label",{className:"homepage-input-label",htmlFor:"input-file",children:Object(v.jsxs)("div",{className:"homepage-input-container",children:[Object(v.jsx)("input",{disabled:s,id:"input-file",name:"file",accept:"image/png, image/jpg, image/gif, image/jpeg",type:"file",onChange:function(e){E(e.target.files[0]);var t=window.URL.createObjectURL(e.target.files[0]);document.getElementById("image-input").src=t}}),null===C&&Object(v.jsx)("span",{style:{fontSize:"15px",color:"gray"},id:"preview-images",children:p("select image")}),Object(v.jsx)("img",{className:"input-image",width:"500",id:"image-input",src:"",alt:""})]})}),null!==C&&Object(v.jsx)("button",{style:{backgroundColor:"white",border:"1px solid lightgray",cursor:"pointer",marginTop:"10px"},onClick:B,children:p("discard image")})]})})}function T(){var e=Object(r.useContext)(u).userId,t=Object(r.useState)({}),n=Object(A.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(""),o=Object(A.a)(i,2),s=o[0],l=o[1],d=x().request,p=Object(y.a)(),j=p.t,m=(p.i18n,Object(r.useCallback)(Object(h.a)(b.a.mark((function t(){var n,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=["Welcome there","What's up","Hi","Welcome dear","For you w/ love","Welcome back","My pleasure to see you here"],t.next=4,d("/api/auth/info","POST",{userId:e});case 4:(r=t.sent)&&l(n[Math.floor(Math.random()*n.length)]),c(r),t.next=11;break;case 9:t.prev=9,t.t0=t.catch(0);case 11:case"end":return t.stop()}}),t,null,[[0,9]])}))),[d,e]));return Object(r.useEffect)((function(){m()}),[m]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("h3",{align:"right",children:[j(s),", ",a.name,"!"]}),Object(v.jsx)("p",{align:"right",children:j("Check new posts!")})]})}function R(){return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{className:"lds-ring",children:[Object(v.jsx)("div",{}),Object(v.jsx)("div",{}),Object(v.jsx)("div",{}),Object(v.jsx)("div",{})]})})}function M(){var e=Object(r.useContext)(u),t=e.isAuth,n=e.userId,a=x(),c=a.loading,i=a.request,o=Object(r.useState)(0),s=Object(A.a)(o,2),l=s[0],d=s[1],p=Object(r.useState)([]),j=Object(A.a)(p,2),m=j[0],g=j[1],O=Object(r.useState)(!1),f=Object(A.a)(O,2),k=f[0],w=f[1],S=Object(r.useState)(!1),I=Object(A.a)(S,2),C=I[0],E=I[1],N=Object(y.a)(),M=N.t,z=(N.i18n,Object(r.useCallback)(Object(h.a)(b.a.mark((function e(){var t,n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d(0),null!==(t=JSON.parse(localStorage.getItem("userData")))){e.next=8;break}return e.next=5,i("/api/articles/get/0","GET",null,{Authorization:"Bearer  "});case 5:return n=e.sent,g(n),e.abrupt("return");case 8:return e.next=10,i("/api/articles/get/0","GET",null,{Authorization:"Bearer "+t.userId});case 10:r=e.sent,g(r);case 12:case"end":return e.stop()}}),e)}))),[i]));Object(r.useEffect)((function(){z()}),[z]);var L=Object(r.useCallback)(Object(h.a)(b.a.mark((function e(){var t,n,r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l+1,null!==(n=JSON.parse(localStorage.getItem("userData")))){e.next=11;break}return E(!0),e.next=6,fetch("/api/articles/get/"+t,{method:"GET",headers:{Authorization:"Bearer  ","Content-Type":"application/json"}}).then((function(e){return E(!1),e.json()}));case 6:return 0===(r=e.sent).length&&w(!0),d(l+1),g(m.concat(r)),e.abrupt("return");case 11:return E(!0),e.next=14,fetch("/api/articles/get/"+t,{method:"GET",headers:{Authorization:"Bearer "+n.userId,"Content-Type":"application/json"}}).then((function(e){return E(!1),e.json()}));case 14:0===(a=e.sent).length&&w(!0),d(l+1),g(m.concat(a));case 18:case"end":return e.stop()}}),e)}))),[fetch,l,m]),F=document.getElementById("myBtn");function G(){document.body.scrollTop>20||document.documentElement.scrollTop>20?F.style.display="block":F.style.display="none"}return window.onscroll=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G(),0!==document.documentElement.scrollHeight-document.documentElement.scrollTop-document.documentElement.clientHeight||k||0===m.length){e.next=5;break}return e.next=5,L();case 5:case"end":return e.stop()}}),e)}))),Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("main",{className:"homepage-main",children:[Object(v.jsxs)("div",{className:"homepage-main-header",children:[t&&Object(v.jsx)(B,{onCreate:function(){window.location.reload()}}),Object(v.jsxs)("div",{className:"homepage-account",children:[t&&null!==n&&Object(v.jsx)(T,{}),c&&Object(v.jsx)("div",{children:"Loading..."})]})]}),Object(v.jsxs)("div",{className:"homepage-main-container",children:[Object(v.jsx)("p",{style:{fontSize:"20px"},children:M("Recent posts:")}),void 0!==m&&!c&&Object(v.jsx)(D,{onDelete:function(){g([]),z()},articles:m}),k&&Object(v.jsx)("div",{align:"center",children:Object(v.jsx)("p",{children:M("No more posts...")})}),Object(v.jsx)("button",{onClick:function(){document.body.scrollTop=0,document.documentElement.scrollTop=0},id:"myBtn",title:"To top",children:M("Go to top")}),C&&Object(v.jsx)("div",{align:"center",children:Object(v.jsx)(R,{})})]})]})})}function z(){return Object(v.jsx)(v.Fragment,{children:!I.isMobile&&Object(v.jsx)("footer",{className:"footer-main",children:Object(v.jsx)("div",{className:"footer-block",children:Object(v.jsxs)("span",{children:["\xa9 Public Blog App by bliny so smetanoi",Object(v.jsx)("br",{}),"Nur-Sultan, Qazaqstan 2022"]})})})})}var L=n(20);function F(e){var t=Object(r.useContext)(u),n=Object(y.a)(),a=n.t,c=(n.i18n,Object(s.f)(),Object(r.useState)(!1)),i=Object(A.a)(c,2),o=i[0],l=i[1],d=Object(r.useState)(!1),p=Object(A.a)(d,2),j=p[0],O=p[1],f=Object(r.useState)(!1),k=Object(A.a)(f,2),w=k[0],S=k[1],I=x(),C=I.loading,E=I.request,N=I.error,D=I.clearError,B=I.messages,T=I.clearMessages,M=Object(r.useState)(null),z=Object(A.a)(M,2),F=z[0],G=z[1],Y=Object(r.useState)({email:"",password:""}),J=Object(A.a)(Y,2),_=J[0],U=J[1],Q=Object(r.useState)({email:"",password:"",first_name:"",last_name:""}),W=Object(A.a)(Q,2),H=W[0],P=W[1];function K(){return(K=Object(h.a)(b.a.mark((function n(){var r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,""!==_.password&&""!==_.email){n.next=3;break}return n.abrupt("return");case 3:return O(!0),n.next=6,E("/api/auth/login","POST",Object(g.a)({},_));case 6:r=n.sent,t.login(r.token,r.userId),window.location.reload(),e.onClose(),n.next=14;break;case 12:n.prev=12,n.t0=n.catch(0);case 14:case"end":return n.stop()}}),n,null,[[0,12]])})))).apply(this,arguments)}function q(){return(q=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,null!==N&&V(),e.next=4,E("/api/auth/register","POST",Object(g.a)({},H));case 4:e.sent,l(!0),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function Z(e){U(Object(g.a)(Object(g.a)({},_),{},Object(m.a)({},e.target.name,e.target.value.trim())))}function X(e){P(Object(g.a)(Object(g.a)({},H),{},Object(m.a)({},e.target.name,e.target.value.trim())))}function V(){G(null),D()}return Object(r.useEffect)((function(){if(null!==B&&void 0!==B){var e=B.map((function(e){return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{children:e.msg},e.index)})}));G(e)}}),[B,T]),Object(r.useEffect)((function(){null!==N&&O(!0)}),[N,D]),e.show?Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:"modal",children:Object(v.jsxs)("div",{className:"modal-content",children:[Object(v.jsxs)("div",{className:"modal-header",children:[Object(v.jsx)("h3",{style:{color:"#501B1D"},children:a(w?"Sign up":"Log in")}),C&&Object(v.jsx)(R,{}),Object(v.jsx)("span",{style:{cursor:"pointer"},onClick:e.onClose,children:"\u2715"})]}),Object(v.jsxs)("div",{className:"modal-body",children:[w&&!o&&Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{onClick:V,children:Object(v.jsx)("button",{style:{cursor:"pointer"},onClick:function(){return S(!w)},children:"\u21a9"})}),Object(v.jsxs)("div",{align:"center",children:[null!==F&&F,Object(v.jsxs)("div",{children:[Object(v.jsx)(L.a,{}),Object(v.jsx)("input",{"data-tip":a("email should be in format example@mail.com"),className:"signup-input",placeholder:"Email",type:"text",name:"email",value:H.email,onChange:X})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)(L.a,{}),Object(v.jsx)("input",{"data-tip":a("password should be at least 8 characters"),className:"signup-input",placeholder:a("Password"),type:"password",name:"password",value:H.password,onChange:X})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)(L.a,{}),Object(v.jsx)("input",{"data-tip":a("first name should be filled"),className:"signup-input",placeholder:a("First name"),type:"text",name:"first_name",value:H.first_name,onChange:X})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)(L.a,{}),Object(v.jsx)("input",{"data-tip":a("last name should be filled"),className:"signup-input",placeholder:a("Last name"),type:"text",name:"last_name",value:H.last_name,onChange:X})]}),Object(v.jsx)("br",{}),j&&!C&&Object(v.jsx)("div",{align:"center",style:{color:"darkred"},children:Object(v.jsx)("p",{children:N})}),Object(v.jsx)("div",{align:"center",children:Object(v.jsx)("button",{style:{cursor:"pointer"},className:"signup-button",onClick:function(){return q.apply(this,arguments)},children:a("Register")})})]})]}),o&&Object(v.jsx)("div",{children:Object(v.jsxs)("p",{children:[a("You registered, in order to log in, please press this button")," ",Object(v.jsx)("button",{onClick:function(){S(!1),l(!1)},children:a("Log in")})]})}),!w&&Object(v.jsxs)("div",{align:"center",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{style:{marginBottom:"5px"},onClick:V,children:Object(v.jsx)("input",{className:"login-input",placeholder:"Email",type:"text",name:"email",value:_.email,onChange:Z})}),Object(v.jsx)("div",{onClick:V,children:Object(v.jsx)("input",{className:"login-input",placeholder:a("Password"),type:"password",name:"password",value:_.password,onChange:Z})}),Object(v.jsxs)("div",{children:[j&&Object(v.jsx)("div",{style:{color:"darkred"},children:Object(v.jsx)("p",{children:N})}),null!==F&&F]})]}),Object(v.jsx)("div",{children:Object(v.jsxs)("p",{onClick:V,children:[a("Do not have account yet?")," ",Object(v.jsx)("span",{style:{textDecoration:"underline",color:"#501B1D",cursor:"pointer"},onClick:function(){return S(!w)},children:a("Sign up")}),"."]})}),Object(v.jsx)("button",{className:"login-button",onClick:function(){return K.apply(this,arguments)},children:a("Enter")})]})]}),Object(v.jsx)("div",{className:"modal-footer"})]})})}):null}function G(){Object(s.f)();var e=Object(r.useContext)(u),t=e.isAuth,n=e.logout,a=Object(y.a)(),c=a.t,i=a.i18n,l=Object(r.useState)(!1),d=Object(A.a)(l,2),p=d[0],j=d[1];return t?Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("nav",{className:"navbar-main",children:Object(v.jsxs)("div",{className:"navbar-block",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{className:"lang-button",onClick:function(){i.changeLanguage("en",(function(e,t){if(e)return console.log("noth");localStorage.setItem("lang","en"),S.NotificationManager.info("Switched to english")}))},children:"eng"}),Object(v.jsx)("button",{className:"lang-button",onClick:function(){i.changeLanguage("ru",(function(e,t){if(e)return console.log("noth");localStorage.setItem("lang","ru"),S.NotificationManager.info("\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0435\u043d\u043e \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u0438\u0439")}))},children:"\u0440\u0443\u0441"})]}),Object(v.jsx)(o.b,{style:{textDecoration:"none",color:"#501B1D",fontSize:"25px"},to:"/",children:Object(v.jsx)("b",{children:c("Public Blog App")})}),Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{children:Object(v.jsx)(o.b,{to:"/profile",children:Object(v.jsx)("img",{style:{marginRight:"30px",width:"30px",height:"30px"},src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAMAAADDpiTIAAADAFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACzMPSIAAAA/3RSTlMAAQIDBAUGBwgJCgsMDQ4PEBESExQVFhcYGRobHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaW1xdXl9gYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXp7fH1+f4CBgoOEhYaHiImKi4yNjo+QkZKTlJWWl5iZmpucnZ6foKGio6SlpqeoqaqrrK2ur7CxsrO0tba3uLm6u7y9vr/AwcLDxMXGx8jJysvMzc7P0NHS09TV1tfY2drb3N3e3+Dh4uPk5ebn6Onq6+zt7u/w8fLz9PX29/j5+vv8/f7rCNk1AAANy0lEQVQYGe3BC4CXc74G8Oc/96npMt3b0UnoYsut1bZEFicORYmYctu1Csm67E3qKMm9JNd157hsiyW7CRnUaomkLVSUoTsVNU1NTc1/nt1j9zikad73/d/e3/d9Ph+IiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIiIhkREHnowYOGznxwSeefv7F11598fmnH39wwsihA3t3zIeYltu1dPwTb65hnVbPfnzcGfvnQMzJ6X7Jo/Or6cn2eY9cfHA2xIr8Y68p20KfNs8Y89M8iPP2vujPWxjQ5ueGtYM4bP+xHzJBC0d3gjhpv9ELmRTzR3aAOKbgzJlMoldL8yHu6Dr5KybZhlu7QJwQ+8+XmBLTjo5Bwi7v7AVMmXlDciFhlnv+cqbUJ+fmQMIq+5xlTLmPBmdBwijWfzHT4oMTIeHTrYxp8+L+kHBpcXecabTztmJIeMTO/ZJptm5wDBISHWYwA174D0gYZF++lRlROSILknHt/8qMebUEkmGDNzGDvjoVkkmNH2OGPVAEyZhuHzPjFnWGZMjpWxgCmwdAMiFnIkPi+mxI2jUtY2hMbwRJs/YfMETml0DS6tC1DJVVB0HSqO9WhkxlH0jaDNrJ0KnuD0mTc+MMoZrBkLS4iOFU+wtIGoxgaA2DpNx5DK/asyApVlrLEKsZCEmp/jUMtR0nQFKo13aGXFUPSMp03MDQ+3xvSIq0WEoHLGoKSYmC2XTCa3mQFIg9REfcDUmBC+iMcyFJ13MHnbHtEEiStVpFh5Q3gyRV1st0yvMxSDJdSscMgyTRgdV0TFUXSNIUvk/nvJcHSZaJdND1kCT5cZwOqjkIkhS5C+mkuTmQZBhFR10BSYLO1XRUVQdI4l6ks56FJOxEOuxoSIJyl9BhC7IhibmMTrsAkpDijXTa+kaQRIyn40ZBEtCiko7b2BQS3M103jWQwNpU0Xmbm0OCuokGXAMJqNEmGrC+ASSYy2jChZBAcj6jCR9nQYI4g0YMgAQxi0bMgATQmWZ0gPh3C80YD/Etbx3NWJ0D8WsQDTkJ4tdUGjIF4lOTahqytSHEn7NpyiCIP9NoyjMQX4p30JRtjSB+DKYxp0D8+B8acy/Eh6wvaMyKGMS7H9GcH0K8G01zfgXx7nWaMx3iWW4VzdmYBfHqUBrUDeLVpTToQohXT9GgxyBeraBBSyEeFdOi2iKIN71pUk+INyNo0vkQb+6jSbdDvHmLJs2EeLOeJq2EeFJEm2rzIV50o1H7QbzoR6P6QLwYQaOGQry4kUaNg3jxAI26C+LFczRqCsSLN2hUGcSLRTRqPsSLL2jUSogXlTRqA8SLahpVCfEgRquqIR7k0qwYpH5FNCsPUr8mNKsBpH6FNCsHUr9sWhWHeBGnUdsgXlTRqE0QLzbRqHUQL1bQqKUQL+bTqDkQL16hUdMgXkyhUY9CvLiTRk2EeDGGRl0J8eJnNGowxIujaNRPIF60p1GtIV7k1NCkqhjEk3KatAjizXSa9CzEmxtp0liIN0No0qkQb7rRpI4Qb3J30KCt2RCP5tGgtyBe3UGDJkC8KqVBAyBetaNBrSCeraA5H0G8e5LmPAjx7lyaczrEu9a0Jt4M4sM8GvM3iB/X0ZjRED960ZhDIX5kr6Epn8UgvtxOU26G+NOLpvwI4k/WShqyLAbx6VYacj3ErwNoSCeIb3NoxiyIf7+gGWdB/CuqpBEbCyEB3EsjbocE0ZU21HaEBDKdJjwLCeYYmnA4JJjYfBrwJiSoITRgICSo7MV03vwsSGCn03knQYLLWkDHvR2DJGAAHXc8JBGxOXTazBgkIT3pstqDIQl6jA67D5Kokq10VkUrSMJG01m/hiQufzEdtSAXkgRH0E3xHpCkuJtOmghJjsar6KBPG0KS5AQ66FhI0txB59wCSZ7CD+iY9/IhSXRgNZ1S1QWSVL+kU4ZBkis2hQ55OAZJsqIP6Iz3CiFJ17GCjviqAyQFTq6lE+LHQ1LiCjphOCQ1YnfRARMgqZIzjaH3TBYkZYreZci9WQhJoRYfMtTmF0NSqu0yhtjiVpAUa7+CoVVeAkm5jisZUsv3gaTB3p8wlD5qB0mLksUMoYWtIWnScj5D551mkLRpUsaQmd4IkkZ5DzNU7smBpFVsNEPkNzFIug3ZxpDYchokAw4uZyh83BWSEc2mMwSmNoFkSNbYWmZYzVVZkMzpvYIZVX4YJKOaTmEGPdoYkmGxsyuYIRtLISFQMpUZ8cc2kFCInbqWabfqZEhoFN9by7SK39kEEiaHzGIalXWDhEzstE+ZJsv6xyDhU3DFOqbB57/Mh4RT0ZVfMcXW/7oBJLwaX72BKbTuqkaQcGtw0VKmyJKhBZDwyx7wBlNg5klZEEd0nfQlk2r9LV0gLikoLYszSWpeHpQHcU6b4bNqmbD4axe0hDjqB5e8tJ0JqHpheBuI0xqccPvHDGTJpOMKIBa0PW3S3Br6sHPOxIGtIZY07HXhXW9UsF4bZ9057LAGEJNie/U+Z8zDM5esj3MX8fWLX3/ov88+oiQGiYCsZp169u7Td+Dg0oF9+/Tu2bE4CyIiIiIiIiIiIiIiIiIiEiad8pExhftBMuzkqhXn5yAj8oavqfwvSEYNryH5yc9zkHZ5w5aT3PlzSObEbuC/lF+Uj7QqvGQl/+VqSKbkP8lvrL2qGGnT4up1/MaDOZCMaDaL37bl7s5Ii673V/HbZjSGZMA+S7iL2ldOyUGK5Q6ayV0tbAdJu55fcDdWX7cfUqjzjZ9zN1YfAkmz06pYh9lDmyIlml80h3Wo7AtJq9/Usm7VU4c0QpI1OWfaDtat5mJI+uT8nvXY9pfzWiNp2g6dXs163JoFSZPGL9GD2rev+Uk2EpbT69q5tfRgagNIWrRbSK82PnfZwVkILLv75c9X0Ku5bSBp0H0Nfal4edyJLeFb637jX6mkL8u7QVKu3xYGsOIv4wcfWABPCg8acv0LqxhARR9Iio2oYWDx8lfuubL0yA6F2K0G+/QefOXvyz6rZWA7z4OkUtZtTIbN5W+//NRDk28aO+q3vxs19qbJDz01453ySibDdTFIyhQ+x9B7Ig+SIi3n0AGvN4WkRMdldMKH7SEpcNh6OmJtd0jS9a+iMyqPgyTZBTV0yI6zIUl1LR0zEpI82Q/SOXdkQZKk4Hk6aEoeJCmazKKTZhRBkqDN3+mot1tAErb3MjprcQkkQfuvosM+3ReSkO7r6bQ1XSEJOGITHbfhUEhgx2yl8yoOhwR0XBUNqDwSEkjf7TRh6zGQAPpX04iq4yC+nbyDZmzrA/GpbzUNqToa4svx22nKliMhPhy7jcZUHg7xrNdWmlPRHeLRwZto0PouEE86fUGTVraHeNBuOY1a2gZSr+aLadaCJpB6FL5Jw17Lg+xR9lSa9mQMsif30LibIXtwFc27BFKn02tpXrwvpA49qhgBmw+A7NZeaxgJn7WC7EbD9xgRf8uHfE/sT4yMRyHfM5IRMgKyiz5xRsiOXpDvaL+BkbKmLeRbCuYxYmbnQv7f/Yyc2yDfKGUEnQT5t30rGEEb9oJ8LW8uI+mNbMj/upURdS3kn46vZUTFj4KgeDUj69NGkD8wwh5A5J3BSOuHiGv7JSNtbXNE2zRG3BREWikjrx8irPhzRt7yIkTXAxTehsj6KYWM90BE5X9E+ae/5yCaRlG+dikiqWQL5WsbWyCKnqT8272IoCMo/yd+CCIn6z3KN95A5JxP+ZYzEDGFqynfsiwX0fI7yncMR6Q0/YryHWsbIkpuoOxiFCKk7VbKLjY1Q3TcRfmemxEZP9hO+Z4tzREVkyi7MQ4R0XIrZTc2NkY0XE/ZrZGIhKYVlN1a1wBRMJpSh8sQAXmfU+rwaTbsO4dSp1Ng3zxKnWbCvF6UPTgI1j1F2YOHYFy7nZQ92N4Sto2n7NGVMC17FWWPPoZpJ1Lq0RuWPUOpxyMwrOUOSj22NIJdV1DqNRR2fUCp11sw6xCKBx1h1Y0UD0bBqnKKBwthVA+KJ11g0wSKJ2NgUmw5xZNFMOkwikcHwKKbKR6NgUWLKB69A4P2oXhV2xr2XELx7Gew52WKZ0/DnIbbKZ5V5MKaARQfjoY191J8uAXWLKX48C6MKaH4UdMEtpxJ8aUfbLmf4ssE2LKU4su7MKWE4k9NE1hyJsWnfrDkbopPN8CSuRSfymBIXjXFp00x2PFjim+dYcfFFN/Ogh2PUHybDDs+pPj2JswoilN8q8qBFb0oARwAK4ZRAiiFFZMpAYyDFWWUAP4EK9ZQAlgCI4opQdTkwYYjKIEcABuGUQIphQ2TKIGMgw1/pgTyOGx4nxLIbNhQSQlkNUxoQQmmNh8W9KAE1AkWDKIEdBws+C0loAtgwT2UgG6ABdMoAT0BC96lBFQGC1ZSAnofFmynBLQOBjSlBBXPhvs6UwJrDff1pgR2INx3GiWwPnDfxZTAzoL7xlICuxzuu5US2Bi4735KYBPgvj9SArsP7ptOCewPcN9sSmAvwH0LKIH9Fe4rpwQ2H+7bQAnsE7ivmhLYOjgvRgluM5yXSwluG5zXgBLcTjivMSUBcF4zSgJy4LpWlAQUwHUllAQ0guvaUxJQDNftS0lAK7hur5mSgOYQEREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREWf9A4z5SEKeXnD2AAAAAElFTkSuQmCC"})})}),Object(v.jsx)("button",{style:{borderRadius:"5px",border:"1px solid #501B1D",color:"#501B1D",backgroundColor:"white",cursor:"pointer"},onClick:function(){n(),window.location.reload()},children:c("Log out")})]})]})})}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("nav",{className:"navbar-main",children:Object(v.jsxs)("div",{className:"navbar-block",children:[Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{className:"lang-button",onClick:function(){i.changeLanguage("en",(function(e,t){if(e)return console.log("noth");localStorage.setItem("lang","en"),S.NotificationManager.info("Switched to english")}))},children:"eng"}),Object(v.jsx)("button",{className:"lang-button",onClick:function(){i.changeLanguage("ru",(function(e,t){if(e)return console.log("noth");localStorage.setItem("lang","ru"),S.NotificationManager.info("\u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0435\u043d\u043e \u043d\u0430 \u0440\u0443\u0441\u0441\u043a\u0438\u0439")}))},children:"\u0440\u0443\u0441"})]}),Object(v.jsx)(o.b,{style:{textDecoration:"none",color:"#501B1D",fontSize:"25px"},to:"/",children:Object(v.jsx)("b",{children:c("Public Blog App")})}),Object(v.jsx)("button",{style:{borderRadius:"5px",border:"1px solid #501B1D",color:"#501B1D",backgroundColor:"white",cursor:"pointer"},onClick:function(){return j(!0)},children:c("Log in")})]})}),Object(v.jsx)(F,{show:p,onClose:function(){return j(!1)}})]})}function Y(e){var t=Object(y.a)(),n=t.t,a=(t.i18n,Object(r.useState)(e.image)),c=Object(A.a)(a,2),i=c[0],o=c[1],s=Object(r.useState)(!1),l=Object(A.a)(s,2),d=l[0],p=l[1],j=Object(r.useState)(),x=Object(A.a)(j,2),m=x[0],g=x[1],O=(Object(r.useContext)(u).userId,Object(r.useState)(!1)),f=Object(A.a)(O,2),k=f[0],w=f[1],S=Object(r.useState)(!1),I=Object(A.a)(S,2),C=I[0],E=I[1];function N(){return(N=Object(h.a)(b.a.mark((function t(){var n,r,a,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E(!0),n=JSON.parse(localStorage.getItem("userData")),(r=new FormData).append("file",m),t.next=6,fetch("/api/files/upload",{method:"POST",body:r}).then((function(e){return e.json()}));case 6:if(!(a=t.sent)){t.next=19;break}return console.log(a),t.next=11,fetch("/api/auth/profile/photo",{method:"POST",body:JSON.stringify({photo:a.filename}),headers:{Authorization:"Bearer "+n.userId,"Content-Type":"application/json"}}).then((function(e){return e.json()}));case 11:if(!t.sent){t.next=19;break}return t.next=15,fetch("/api/auth/profile/photo",{method:"GET",headers:{Authorization:"Bearer "+n.userId}}).then((function(e){return e.json()}));case 15:c=t.sent,o(c.profile.image),E(!1),e.reload();case 19:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)("div",{className:"profilepage-profile-photo",children:Object(v.jsxs)("div",{className:"profilepage-profile-photo",onMouseEnter:function(){return p(!d)},onMouseLeave:function(){return p(!d)},children:[Object(v.jsx)("img",{id:"profile-image-input",className:"profilepage-photo",src:"https://publicblogapp.herokuapp.com/api/files/download/"+i}),d&&e.editable&&Object(v.jsx)("div",{className:"profilepage-photo-hover",children:Object(v.jsxs)("label",{htmlFor:"input-file",children:[Object(v.jsx)("input",{disabled:C,id:"input-file",name:"file",accept:"image/png, image/jpg, image/gif, image/jpeg",type:"file",onChange:function(e){g(e.target.files[0]);var t=window.URL.createObjectURL(e.target.files[0]);document.getElementById("profile-image-input").src=t,w(!0)}}),Object(v.jsx)("div",{style:{cursor:"pointer",color:"white"},children:n("select photo")})]})}),Object(v.jsx)("br",{}),k&&Object(v.jsx)("div",{align:"center",style:{fontSize:"15px",cursor:"pointer",textDecoration:"underline"},onClick:function(){return N.apply(this,arguments)},children:n("save image")})]})})})}function J(e){var t=Object(y.a)(),n=t.t,a=(t.i18n,Object(r.useState)(e.info)),c=Object(A.a)(a,2),i=c[0],o=(c[1],Object(r.useState)(!1)),s=Object(A.a)(o,2),l=s[0],u=s[1],d=Object(r.useState)({description:i.profile.description,first_name:i.first_name,last_name:i.last_name}),p=Object(A.a)(d,2),j=p[0],x=p[1];function O(){return(O=Object(h.a)(b.a.mark((function t(){var r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,""!==j.first_name.trim()&&""!==j.last_name.trim()){t.next=4;break}return S.NotificationManager.error(n("Cannot be empty!")),t.abrupt("return");case 4:return r=JSON.parse(localStorage.getItem("userData")),t.next=7,fetch("/api/auth/profile/edit",{method:"PUT",body:JSON.stringify(j),headers:{Authorization:"Bearer "+r.userId,"Content-Type":"application/json"}}).then((function(e){return e.json()}));case 7:S.NotificationManager.info(n("Edited")),e.reload(),u(!1),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))).apply(this,arguments)}function f(e){x(Object(g.a)(Object(g.a)({},j),{},Object(m.a)({},e.target.name,e.target.value)))}return Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("div",{style:{border:"1px solid lightgray",padding:"10px",borderRadius:"10px"},children:[Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[Object(v.jsxs)("span",{children:[l&&Object(v.jsxs)("div",{children:[Object(v.jsx)("input",{onChange:f,style:{padding:"5px",border:"1px solid lightgray",outlineStyle:"none"},type:"text",placeholder:n("First name"),value:j.first_name,name:"first_name"}),Object(v.jsx)("input",{onChange:f,style:{padding:"5px",border:"1px solid lightgray",outlineStyle:"none",marginLeft:"20px"},type:"text",placeholder:n("Last name"),value:j.last_name,name:"last_name"})]}),!l&&Object(v.jsxs)("span",{children:[Object(v.jsx)("span",{children:i.first_name}),Object(v.jsxs)("span",{children:[" ",i.last_name]})]})]}),!l&&e.editable&&Object(v.jsx)("span",{onClick:function(){return u(!0)},style:{cursor:"pointer",textDecoration:"underline",fontSize:"18px"},children:n("edit")}),l&&Object(v.jsxs)("div",{children:[Object(v.jsx)("span",{onClick:function(){return O.apply(this,arguments)},style:{cursor:"pointer",fontSize:"30px",marginRight:"20px"},children:"\u2713"}),Object(v.jsx)("span",{onClick:function(){x({first_name:i.first_name,last_name:i.last_name,description:i.profile.description}),u(!1)},style:{cursor:"pointer",fontSize:"30px"},children:"\u2715"})]})]}),Object(v.jsx)("br",{}),Object(v.jsxs)("div",{style:{fontSize:"15px"},children:[n("Description"),":"]}),!l&&Object(v.jsx)("div",{children:i.profile.description}),l&&Object(v.jsx)("textarea",{onChange:f,style:{resize:"none",borderTop:"none",borderRight:"1px solid lightgray",borderLeft:"1px solid lightgray",borderBottom:"1px solid lightgray"},cols:40,rows:10,placeholder:n("Write here something about you..."),value:j.description,name:"description"})]})})}var _=n(23);function U(){var e=x().request,t=Object(r.useState)(!0),n=Object(A.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)(null),o=Object(A.a)(i,2),s=o[0],l=o[1],d=(Object(r.useContext)(u).isAuth,Object(r.useState)(0)),p=Object(A.a)(d,2),j=p[0],m=p[1],g=Object(r.useState)([]),O=Object(A.a)(g,2),f=O[0],k=O[1],w=Object(r.useState)(!1),S=Object(A.a)(w,2),I=S[0],C=S[1],E=Object(r.useState)(!1),N=Object(A.a)(E,2),B=N[0],T=N[1],M=Object(r.useState)(!1),z=Object(A.a)(M,2),L=z[0],F=z[1],G=Object(y.a)(),U=G.t,Q=(G.i18n,Object(r.useCallback)(Object(h.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.parse(localStorage.getItem("userData")),e.next=3,fetch("/api/auth/profile",{method:"GET",headers:{Authorization:"Bearer "+t.userId}}).then((function(e){return e.json()}));case 3:return n=e.sent,l(n),c(!1),e.next=8,W();case 8:case"end":return e.stop()}}),e)}))),[fetch]));function W(){return H.apply(this,arguments)}function H(){return(H=Object(h.a)(b.a.mark((function t(){var n,r,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(m(0),null!==(n=JSON.parse(localStorage.getItem("userData")))){t.next=8;break}return t.next=5,e("/api/articles/user/?id=".concat(n.userId,"&page=",0),"GET",null,{Authorization:"Bearer  "});case 5:return r=t.sent,k(r),t.abrupt("return");case 8:return t.next=10,e("/api/articles/user/?id=".concat(n.userId,"&page=",0),"GET",null,{Authorization:"Bearer "+n.userId});case 10:a=t.sent,k(a);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function P(){return K.apply(this,arguments)}function K(){return(K=Object(h.a)(b.a.mark((function t(){var n,r,a;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(m(0),null!==(n=JSON.parse(localStorage.getItem("userData")))){t.next=8;break}return t.next=5,e("/api/articles/liked/?id=".concat(n.userId,"&page=",0),"GET",null,{Authorization:"Bearer  "});case 5:return r=t.sent,k(r),t.abrupt("return");case 8:return console.log(j),t.next=11,e("/api/articles/liked/?id=".concat(n.userId,"&page=",0),"GET",null,{Authorization:"Bearer "+n.userId});case 11:a=t.sent,k(a);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var q=Object(r.useCallback)(Object(h.a)(b.a.mark((function e(){var t,n,r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=j+1,null!==(n=JSON.parse(localStorage.getItem("userData")))){e.next=11;break}return T(!0),e.next=6,fetch("/api/articles/liked/?id=".concat(n.userId,"&page=").concat(t),{method:"GET",headers:{Authorization:"Bearer  ","Content-Type":"application/json"}}).then((function(e){return T(!1),e.json()}));case 6:return 0===(r=e.sent).length&&C(!0),m(j+1),k(f.concat(r)),e.abrupt("return");case 11:return T(!0),e.next=14,fetch("/api/articles/liked/?id=".concat(n.userId,"&page=").concat(t),{method:"GET",headers:{Authorization:"Bearer "+n.userId,"Content-Type":"application/json"}}).then((function(e){return T(!1),e.json()}));case 14:0===(a=e.sent).length&&C(!0),m(j+1),k(f.concat(a));case 18:case"end":return e.stop()}}),e)}))),[fetch,j,f]),Z=Object(r.useCallback)(Object(h.a)(b.a.mark((function e(){var t,n,r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=j+1,null!==(n=JSON.parse(localStorage.getItem("userData")))){e.next=11;break}return T(!0),e.next=6,fetch("/api/articles/user/?id=".concat(n.userId,"&page=").concat(t),{method:"GET",headers:{Authorization:"Bearer  ","Content-Type":"application/json"}}).then((function(e){return T(!1),e.json()}));case 6:return 0===(r=e.sent).length&&C(!0),m(j+1),k(f.concat(r)),e.abrupt("return");case 11:return T(!0),e.next=14,fetch("/api/articles/user/?id=".concat(n.userId,"&page=").concat(t),{method:"GET",headers:{Authorization:"Bearer "+n.userId,"Content-Type":"application/json"}}).then((function(e){return T(!1),e.json()}));case 14:0===(a=e.sent).length&&C(!0),m(j+1),k(f.concat(a));case 18:case"end":return e.stop()}}),e)}))),[fetch,j,f]),X=document.getElementById("myBtn");function V(){null!==X&&(document.body.scrollTop>20||document.documentElement.scrollTop>20?X.style.display="block":X.style.display="none")}return window.onscroll=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(V(),0!==document.documentElement.scrollHeight-document.documentElement.scrollTop-document.documentElement.clientHeight||I||0===f.length){e.next=9;break}if(!L){e.next=7;break}return e.next=6,q();case 6:return e.abrupt("return");case 7:return e.next=9,Z();case 9:case"end":return e.stop()}}),e)}))),Object(r.useEffect)((function(){Q()}),[Q]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(_.a,{children:Object(v.jsx)("title",{children:"Your page"})}),Object(v.jsxs)("main",{className:"homepage-main",children:[a&&Object(v.jsx)("div",{align:"center",children:Object(v.jsx)(R,{})}),Object(v.jsxs)("div",{className:"profilepage-profile-info",children:[!a&&Object(v.jsx)(Y,{editable:!0,image:s.profile.image,reload:function(){window.location.reload()}}),!a&&Object(v.jsx)(J,{editable:!0,info:s,reload:function(){window.location.reload()}})]}),Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[!L&&Object(v.jsx)("p",{children:U("Your recent posts:")}),L&&Object(v.jsx)("p",{children:U("Your recent liked posts:")}),Object(v.jsx)("p",{style:{cursor:"pointer",textDecoration:"underline",fontSize:"16px"},onClick:Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!1),e.next=3,P();case 3:F(!0);case 4:case"end":return e.stop()}}),e)}))),children:!L&&U("show your liked posts")})]}),Object(v.jsxs)("div",{className:"homepage-main-container",children:[Object(v.jsx)(D,{onDelete:Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k([]),e.next=3,W();case 3:case"end":return e.stop()}}),e)}))),articles:f}),I&&Object(v.jsx)("div",{align:"center",children:Object(v.jsx)("p",{children:U("No more posts...")})}),Object(v.jsx)("button",{onClick:function(){document.body.scrollTop=0,document.documentElement.scrollTop=0},id:"myBtn",title:"To top",children:U("Go to top")}),B&&Object(v.jsx)("div",{align:"center",children:Object(v.jsx)(R,{})})]})]})]})}function Q(e){var t=e.children;return Object(r.useContext)(u).isAuth?t:Object(v.jsx)("div",{align:"center",style:{color:"#501B1D",fontSize:"40px",height:"800px"},children:"401 error"})}function W(){var e=Object(s.g)().idUser,t=Object(y.a)(),n=t.t,a=(t.i18n,x().request),c=Object(r.useState)(!0),i=Object(A.a)(c,2),o=i[0],l=i[1],d=Object(r.useState)(null),p=Object(A.a)(d,2),j=p[0],m=p[1],g=(Object(r.useContext)(u).isAuth,Object(r.useState)(0)),O=Object(A.a)(g,2),f=O[0],k=O[1],w=Object(r.useState)([]),S=Object(A.a)(w,2),I=S[0],C=S[1],E=Object(r.useState)(!1),N=Object(A.a)(E,2),B=N[0],T=N[1],M=Object(r.useState)(!1),z=Object(A.a)(M,2),L=z[0],F=z[1],G=Object(r.useState)(!1),U=Object(A.a)(G,2),Q=U[0],W=U[1],H=Object(r.useCallback)(Object(h.a)(b.a.mark((function t(){var n;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return JSON.parse(localStorage.getItem("userData")),t.next=3,fetch("/api/articles/profile/"+e,{method:"GET"}).then((function(e){return e.json()}));case 3:return n=t.sent,m(n),l(!1),t.next=8,P();case 8:case"end":return t.stop()}}),t)}))),[fetch]);function P(){return K.apply(this,arguments)}function K(){return(K=Object(h.a)(b.a.mark((function t(){var n,r,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(k(0),null!==(n=JSON.parse(localStorage.getItem("userData")))){t.next=8;break}return t.next=5,a("/api/articles/user/?id=".concat(e,"&page=",0),"GET",null,{Authorization:"Bearer  "});case 5:return r=t.sent,C(r),t.abrupt("return");case 8:return t.next=10,a("/api/articles/user/?id=".concat(e,"&page=",0),"GET",null,{Authorization:"Bearer "+n.userId});case 10:c=t.sent,C(c);case 12:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function q(){return Z.apply(this,arguments)}function Z(){return(Z=Object(h.a)(b.a.mark((function t(){var n,r,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(k(0),null!==(n=JSON.parse(localStorage.getItem("userData")))){t.next=8;break}return t.next=5,a("/api/articles/liked/?id=".concat(e,"&page=",0),"GET",null,{Authorization:"Bearer  "});case 5:return r=t.sent,C(r),t.abrupt("return");case 8:return console.log(f),t.next=11,a("/api/articles/liked/?id=".concat(e,"&page=",0),"GET",null,{Authorization:"Bearer "+n.userId});case 11:c=t.sent,C(c);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var X=Object(r.useCallback)(Object(h.a)(b.a.mark((function t(){var n,r,a,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=f+1,null!==(r=JSON.parse(localStorage.getItem("userData")))){t.next=11;break}return F(!0),t.next=6,fetch("/api/articles/liked/?id=".concat(e,"&page=").concat(n),{method:"GET",headers:{Authorization:"Bearer  ","Content-Type":"application/json"}}).then((function(e){return F(!1),e.json()}));case 6:return 0===(a=t.sent).length&&T(!0),k(f+1),C(I.concat(a)),t.abrupt("return");case 11:return F(!0),t.next=14,fetch("/api/articles/liked/?id=".concat(e,"&page=").concat(n),{method:"GET",headers:{Authorization:"Bearer "+r.userId,"Content-Type":"application/json"}}).then((function(e){return F(!1),e.json()}));case 14:0===(c=t.sent).length&&T(!0),k(f+1),C(I.concat(c));case 18:case"end":return t.stop()}}),t)}))),[fetch,f,I]),V=Object(r.useCallback)(Object(h.a)(b.a.mark((function t(){var n,r,a,c;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=f+1,null!==(r=JSON.parse(localStorage.getItem("userData")))){t.next=11;break}return F(!0),t.next=6,fetch("/api/articles/user/?id=".concat(e,"&page=").concat(n),{method:"GET",headers:{Authorization:"Bearer  ","Content-Type":"application/json"}}).then((function(e){return F(!1),e.json()}));case 6:return 0===(a=t.sent).length&&T(!0),k(f+1),C(I.concat(a)),t.abrupt("return");case 11:return F(!0),t.next=14,fetch("/api/articles/user/?id=".concat(e,"&page=").concat(n),{method:"GET",headers:{Authorization:"Bearer "+r.userId,"Content-Type":"application/json"}}).then((function(e){return F(!1),e.json()}));case 14:0===(c=t.sent).length&&T(!0),k(f+1),C(I.concat(c));case 18:case"end":return t.stop()}}),t)}))),[fetch,f,I]),$=document.getElementById("myBtn");function ee(){null!==$&&(document.body.scrollTop>20||document.documentElement.scrollTop>20?$.style.display="block":$.style.display="none")}return window.onscroll=Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ee(),0!==document.documentElement.scrollHeight-document.documentElement.scrollTop-document.documentElement.clientHeight||B||0===I.length){e.next=9;break}if(!Q){e.next=7;break}return e.next=6,X();case 6:return e.abrupt("return");case 7:return e.next=9,V();case 9:case"end":return e.stop()}}),e)}))),Object(r.useEffect)((function(){H()}),[H]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(_.a,{children:[o&&Object(v.jsx)("title",{children:"Loading..."}),!o&&Object(v.jsxs)("title",{children:[j.first_name," ",j.last_name]})]}),Object(v.jsxs)("main",{className:"homepage-main",children:[o&&Object(v.jsx)("div",{align:"center",children:Object(v.jsx)(R,{})}),Object(v.jsxs)("div",{className:"profilepage-profile-info",children:[!o&&Object(v.jsx)(Y,{editable:!1,image:j.profile.image,reload:function(){window.location.reload()}}),!o&&Object(v.jsx)(J,{editable:!1,info:j,reload:function(){window.location.reload()}})]}),Object(v.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[!o&&!Q&&Object(v.jsxs)("p",{children:[j.first_name,n("'s posts:")]}),Q&&Object(v.jsxs)("p",{children:[n("Liked by")," ",j.first_name,":"]}),!o&&Object(v.jsx)("p",{style:{cursor:"pointer",textDecoration:"underline",fontSize:"16px"},onClick:Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(!1),e.next=3,q();case 3:W(!0);case 4:case"end":return e.stop()}}),e)}))),children:!Q&&n("show liked posts by ")+j.first_name})]}),Object(v.jsxs)("div",{className:"homepage-main-container",children:[Object(v.jsx)(D,{onDelete:Object(h.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C([]),e.next=3,P();case 3:case"end":return e.stop()}}),e)}))),articles:I}),B&&Object(v.jsx)("div",{align:"center",children:Object(v.jsx)("p",{children:n("No more posts...")})}),Object(v.jsx)("button",{onClick:function(){document.body.scrollTop=0,document.documentElement.scrollTop=0},id:"myBtn",title:"To top",children:n("Go to top")}),L&&Object(v.jsx)("div",{align:"center",children:Object(v.jsx)(R,{})})]})]})]})}function H(){var e=p(),t=e.token,n=e.login,r=e.logout,a=e.userId,c=!!t;return Object(v.jsx)(v.Fragment,{children:Object(v.jsx)(u.Provider,{value:{token:t,login:n,logout:r,userId:a,isAuth:c},children:Object(v.jsxs)(o.a,{children:[Object(v.jsx)(G,{}),Object(v.jsxs)(s.c,{children:[Object(v.jsx)(s.a,{path:"/",element:Object(v.jsx)(M,{})}),Object(v.jsx)(s.a,{path:"/profile",element:Object(v.jsx)(Q,{children:Object(v.jsx)(U,{})})}),Object(v.jsx)(s.a,{path:"/user",children:Object(v.jsx)(s.a,{path:":idUser",element:Object(v.jsx)(W,{})})}),Object(v.jsx)(s.a,{path:"*",element:Object(v.jsx)(M,{})})]}),Object(v.jsx)(z,{})]})})})}var P=n(26),K=n.n(P),q=(n(58),n(27)),Z=n(19);q.a.use(Z.e).init({resources:{ru:{translation:{"Public Blog App":"\u041f\u0430\u0431\u043b\u0438\u043a \u0411\u043b\u043e\u0433 \u042d\u043f\u043f","Log out":"\u0412\u044b\u0439\u0442\u0438","Log in":"\u0412\u043e\u0439\u0442\u0438",Post:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c","Create new post:":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u0441\u0442:",Title:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a","Write your text here":"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0441\u0432\u043e\u0439 \u0442\u0435\u043a\u0441\u0442 \u0437\u0434\u0435\u0441\u044c","select image":"\u0432\u044b\u0431\u0435\u0440\u0435\u0442\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435","discard image":"\u0443\u0431\u0440\u0430\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435","Check new posts!":"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0441\u0432\u0435\u0436\u0438\u0435 \u043f\u043e\u0441\u0442\u044b!","Welcome there":"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0441\u044e\u0434\u0430","What's up":"\u0425\u0435\u043b\u043e\u0443",Hi:"\u0421\u0430\u043b\u0430\u043c","Welcome dear":"\u0423\u044d\u043b\u043a\u0430\u043c \u0434\u043e\u0440\u043e\u0433\u0443\u0448\u0430","For you w/ love":"\u0414\u043b\u044f \u0442\u0435\u0431\u044f \u0441 \u043b\u044e\u0431\u043e\u0432\u044c\u044e","Welcome back":"\u0415\u0449\u0435 \u0440\u0430\u0437 \u0443\u044d\u043b\u043a\u0430\u043c","My pleasure to see you here":"\u041c\u043d\u0435 \u043f\u0440\u0438\u044f\u0442\u043d\u043e \u0432\u0438\u0434\u0435\u0442\u044c \u0442\u0435\u0431\u044f \u0437\u0434\u0435\u0441\u044c","Recent posts:":"\u041d\u0435\u0434\u0430\u0432\u043d\u0438\u0435:",Password:"\u041f\u0430\u0440\u043e\u043b\u044c","Do not have account yet?":"\u0415\u0449\u0435 \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?","Sign up":"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f","First name":"\u0418\u043c\u044f","Last name":"\u0424\u0430\u043c\u0438\u043b\u0438\u044f",Register:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",Enter:"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442","You registered, in order to log in, please press this button":"\u0412\u044b \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c, \u0447\u0442\u043e\u0431\u044b \u0432\u043e\u0439\u0442\u0438 \u043d\u0430\u0436\u043c\u0438\u0442\u0435 \u044d\u0442\u0443 \u043a\u043d\u043e\u043f\u043a\u0443","email should be in format example@mail.com":"\u043f\u043e\u0447\u0442\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u0444\u043e\u0440\u043c\u0430\u0442\u0435 example@example.com","password should be at least 8 characters":"\u043f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c 8 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432","first name should be filled":"\u0438\u043c\u044f \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e","last name should be filled":"\u0444\u0430\u043c\u0438\u043b\u0438\u044f \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0430","show comments ":"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 ","No comments added yet...":"\u041d\u0435\u0442 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0435\u0432...","Write your comment here...":"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0437\u0434\u0435\u0441\u044c...",edited:"\u0438\u0437\u043c\u0435\u043d\u0435\u043d\u043e","No more posts...":"\u041f\u043e\u0441\u0442\u044b \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u0438\u0441\u044c(","Reply to":"\u041e\u0442\u0432\u0435\u0442\u0438\u0442\u044c","Go to top":"\u041d\u0430\u0432\u0435\u0440\u0445",reply:"\u043e\u0442\u0432\u0435\u0442\u0438\u0442\u044c","Reply cannot be empty!":"\u041e\u0442\u0432\u0435\u0442 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c!",Replied:"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e","Comment cannot be empty!":"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u043e\u0439!","Commented!":"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d",Edited:"\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u043e","Cannot be empty!":"\u041d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c","Post deleted":"\u041f\u043e\u0441\u0442 \u0443\u0434\u0430\u043b\u0435\u043d",Disliked:"\u0414\u0438\u0437\u043b\u0430\u0439\u043a","Liked!":"\u041f\u043e\u043d\u0440\u0430\u0432\u0438\u043b\u043e\u0441\u044c!",you:"\u0432\u044b",Edit:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",Delete:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c","Your recent posts:":"\u0412\u0430\u0448\u0438 \u043d\u0435\u0434\u0430\u0432\u043d\u0438\u0435:","Your recent liked posts:":"\u041d\u0435\u0434\u0430\u0432\u043d\u043e \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u043b\u043e\u0441\u044c \u0432\u0430\u043c:",edit:"\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c",Description:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435","show your liked posts":"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0447\u0442\u043e \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u043b\u043e\u0441\u044c \u0432\u0430\u043c","select photo":"\u0432\u044b\u0431\u0440\u0430\u0442\u044c \u0444\u043e\u0442\u043e","save image":"\u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435","Posted!":"\u041f\u043e\u0441\u0442!","'s posts:":" \u043d\u0435\u0434\u0430\u0432\u043d\u0438\u0435:","Liked by":"\u041f\u043e\u043d\u0440\u0430\u0432\u0438\u043b\u043e\u0441\u044c","show liked posts by ":"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0442\u043e \u0447\u0442\u043e \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u043b\u043e\u0441\u044c ","Write here something about you...":"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043e \u0441\u0435\u0431\u0435...","show less":"\u0441\u0432\u0435\u0440\u043d\u0443\u0442\u044c","show more":"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0451","Title and text cannot be empty!":"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0438 \u0442\u0435\u043a\u0441\u0442 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c!"}}},lng:localStorage.getItem("lang"),interpolation:{escapeValue:!1}});q.a;null===localStorage.getItem("lang")&&localStorage.setItem("lang","en"),i.a.render(Object(v.jsxs)(a.a.StrictMode,{children:[Object(v.jsx)(K.a,{}),Object(v.jsx)(H,{})]}),document.getElementById("root"))}},[[59,1,2]]]);